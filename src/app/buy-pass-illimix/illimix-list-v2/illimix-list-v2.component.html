<div class="buy-pass-illimix-list-v2-container">
  <div class="error-text scb-text-red-error" *ngIf="error">
    <span>N'a pas pu charger les pass</span>
    <span (click)="getListPassIllimix()" class="reload-text">cliquer pour recharger</span>
  </div>
  <div *ngIf="0" class="buy-pass-illimix-v2-list-body-block-alert">
      <scb-avantage-popup (close)="hideAlert()" [type]="'illimix'"> </scb-avantage-popup>
    </div>
  <div class="buy-pass-illimix-v2-list-body-block" *ngIf="!error && isLoaded">
    <div class="buy-pass-illimix-v2-list-body-block-btns-filter">
      <ng-container *ngFor="let label of listCategory">
        <button (click)="filterPassBy(label)" [ngClass]="{
            'list-filter-btn-selected': selectedCategory === label
          }" class="list-filter-btn" mat-stroked-button>
          <span class="text scb-text-full-black">{{ label }}</span>
        </button>
      </ng-container>
    </div>
    <div class="buy-pass-illimix-v2-list-body-block-list-pass">
      <!-- LIST PASS ILLIMIX TO SHOW -->
      <ng-container *ngFor="let pass of listPassIllimixShown">
        <div (click)="selectPassIllimix(pass)" class="list-pass-item c-pointer"
          [ngClass]="{ 'pass-with-promo': pass?.passPromo }">
          <div class="promo-badge scb-text-white" *ngIf="pass?.passPromo">
            <span class="nom-promo">{{ pass?.description }}</span> jusqu'au
            {{ pass?.dateFin | date: 'dd MMM' }}
          </div>
          <div class="list-pass-item-top-block">
            <div class="pass-name-duration">
              <span class="pass-name scb-text-orange">
                {{ !pass?.passPromo ? pass?.tarif : pass?.passPromo?.tarif }} F
              </span>
                <span *ngIf="!pass?.passPromo" class="pass-duration scb-text-light-black">
                  Valable
                <ng-container
                [ngSwitch]="
                  !pass?.passPromo ? pass?.categoriePass?.libelle : pass?.passPromo?.categoriePass?.libelle
                "
              >
                <ng-container *ngSwitchCase="'Jour'">{{(!pass?.passPromo && pass?.validitePass) ? pass?.validitePass : '1 jour.' }} </ng-container>
                <ng-container *ngSwitchCase="'Semaine'">{{(!pass?.passPromo && pass?.validitePass) ? pass?.validitePass : '7 jours.' }} </ng-container>
                <ng-container *ngSwitchCase="'Mois'"> {{(!pass?.passPromo && pass?.validitePass) ? pass?.validitePass : '30 jours.' }}</ng-container>
                <ng-container *ngSwitchCase="'Nuit'"> {{(!pass?.passPromo && pass?.validitePass) ? pass?.validitePass : 'de 00h à 08h.' }}</ng-container>
                <ng-container *ngSwitchDefault>{{(!pass?.passPromo && pass?.validitePass) ? pass?.validitePass : '' }} </ng-container>
            </ng-container>
                </span>
            </div>
            <div class="item-icon">
              <img src="/assets/images/arrow-right.svg" alt="arrow-right" class="arrow-right" />
            </div>
          </div>
          <div class="list-pass-item-bottom-block">
            <div *ngIf="pass?.volumeInternet || pass?.passPromo?.volumeInternet " class="details-item">
              <div class="details-item-icon">
                <img src="/assets/images/internet.png" alt="internet-usage" class="icon" />
              </div>
              <div class="details-item-text">
                <div class="text">{{ !pass?.passPromo ? pass?.volumeInternet : pass?.passPromo?.volumeInternet }}</div>
                <div class="category scb-text-dark-grey">
                  Internet
                </div>
              </div>
            </div>
            <div *ngIf="pass?.dureeAppelSortant || pass?.passPromo?.dureeAppelSortant" class="details-item">
              <div class="details-item-icon">
                <img src="/assets/images/appel.png" alt="internet-usage" class="icon" />
              </div>
              <div class="details-item-text">
                <div class="text">{{ !pass?.passPromo ? pass?.dureeAppelSortant : pass?.passPromo?.dureeAppelSortant }}</div>
                <div class="category scb-text-dark-grey">
                  Appel
                </div>
              </div>
            </div>
            <div *ngIf="pass?.nombreSms || pass?.passPromo?.nombreSms" class="details-item">
              <div class="details-item-icon">
                <img src="/assets/images/messenger.png" alt="internet-usage" class="icon" />
              </div>
              <div class="details-item-text">
                <div class="text">{{ !pass?.passPromo ? pass?.nombreSms : pass?.passPromo?.nombreSms }}</div>
                <div class="category scb-text-dark-grey">
                  SMS
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <div *ngIf="selectedCategory === 'Abonnement'" class="buy-pass-illimix-v2-list-body-block-bottom-text">
        <span class="text">
          *Avec l’abonnement, votre illimix est automatiquement renouvelé à l’expiration si vous avez du crédit.
        </span>
      </div>
    </div>
  </div>
  <div class="spinner" *ngIf="!isLoaded">
    <mat-spinner mode="indeterminate" [diameter]="60"></mat-spinner>
  </div>
  <div class="no-pass-block" *ngIf="isLoaded && listPassIllimixShown.length < 1">
    {{ getErrorMessageNoPass() }}
  </div>
</div>